version: '3'
services:
  1dtube-ccx:
    build:
      context: .
      dockerfile: Dockerfile.1dtubecxx
      args:
        from: "${SYSTEST_REMOTE}precice${PRECICE_BASE}"
    networks:
      - precicecomm
    volumes:
      - exchange:/home/precice/Data/Exchange/
      - output:/home/precice/Data/Output/
    command: >
      /bin/bash -c "./Allrun &&
        cp *.json *.log /home/precice/Data/Output/ &&
        cp -r Postproc /home/precice/Data/Output/"
    container_name: 1dtube-ccx

  tutorial-data:
    build:
      context: .
      dockerfile: Dockerfile.tutorial_data
      args:
        branch: "develop"
    volumes:
      - exchange:/Exchange/
      - output:/Output/
    container_name: tutorial-data


networks:
  precicecomm:
volumes:
  exchange:
  nutils_input:
  openfoam_input:
  output:
  configs:
