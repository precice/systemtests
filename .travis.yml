sudo: true
dist: trusty
language: python
python:
  - "3.5"
services:
  - docker
install:
  - pip install Jinja2  # Required for README templates in push.py

jobs:
  allow_failures:
    # Currently unstable tests that do not affect the build status
    # To add a test here, list its exact name
    - name: "Ubuntu 18.04.sudo.mpich [Job failure permitted]"
    - name: "Ubuntu 16.04 home PETSc [Job failure permitted]"
    - name: "openFOAM adapter [PETSc] [Job failure permitted]"
    - name: "CalculiX adapter [PETSc] [Job failure permitted]"
    - name: "[16.04 PETSc] OpenFOAM <-> CalculiX [FSI] [Job failure permitted]"
      name: "[16.04] SU2 <-> Calculix [unstable][Job failure permitted]"
    - name: "[18.04] nutils <-> OpenFOAM [Job failure permitted]"


  include:
    - stage: Tests
      name: "[16.04] Elastictube1D - Python"
      script:
        - python system_testing.py -s 1dtube_py -v
        - python push.py --test 1dtube_py

    - name: "[16.04] Elastictube1D - C++"
      script:
        - python system_testing.py -s 1dtube_cxx -v
        - python push.py --test 1dtube_cxx
